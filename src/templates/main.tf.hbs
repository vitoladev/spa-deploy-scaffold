# Terraform configuration for {{projectName}}
# Generated: {{timestamp}}
# Build Tool: {{buildTool}}

terraform {
  required_version = ">= 1.0"
  
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = var.aws_region
}

# Local variables
locals {
  project_name = "{{projectName}}"
  common_tags = {
    Name        = local.project_name
    Environment = var.environment
    ManagedBy   = "Terraform"
    BuildTool   = "{{buildTool}}"
  }
}

# CloudFront + S3 Module for Static SPA
module "frontend" {
  source = "./modules/cloudfront-s3"

  bucket_name        = "${local.project_name}-${var.environment}-spa"
  comment            = "${local.project_name} SPA Distribution"
  price_class        = var.price_class
  enable_versioning  = var.enable_versioning
  {{#if domainName}}
  domain_name        = var.domain_name
  acm_certificate_arn = var.acm_certificate_arn
  {{/if}}

  tags = local.common_tags
}
